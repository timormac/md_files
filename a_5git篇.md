# git本地篇

#### 配置本地信息

进去仓库目录，git init 初始化目录

git config  user.name  查看当前登陆用户

git config  user.email  查看当前用户登陆邮箱

git config  --global user.name  "timormac" 设置用户名

git config  --global user.email  "286710"设置用户名

git config --global user.password 'password' 

git config  --global --list  查看用户名和邮箱

git remote -v  查看所有远程仓库别名

git remote add 别名 远程地址  将别名和远程仓库建立连接

git remote rename  old  new   更改别名





#### 基本命令

git status        查看当前处于什么分支，当前仓库状态

git add  文件/目录(新增)    将新建目录或文件提交到暂存区

git commit -m "备注"   将提交到暂存区的文件提交到仓库

git push  远仓别名   分支名

git reflog 查看历史记录

git reset --hard 版本号    版本穿梭

git fetch    origin   main            和gitpull区别从远程获取最新版本到本地，不会自动合并

git log  -p main  origin/main  比较本地main分支和远仓main分支区别，配合fetch

git merge origin/main            把原仓main分支合并到当前分支



git pull 元仓别名  远程分支名:本地分支名     把远程仓库某个分支合并到本地仓库某个分支



git  branch  查看所有分支

git  branch -d  分支名  删除分支

git  branch    分支名    创建分支

git checkout  分支名    切换分支

git  merge  a分支   将dev内容合并到主分支master



git clone <版本库的网址>   只需一个空目录就行，不需要git init，因为下载的目录下会有.git文件









#### 本地仓库关联云端

点击github仓库的code图标,找到ssh连接地址： git@github.com:timormac/git_warehouse.git

git remote add  别名   git@github.com:timormac/git_warehouse.git     将别名和远程仓库创建连接

git push  远仓别名  分支名字  （会发现失败连接不上github）

ssh -T git@github.com   查看能否登陆到github上 （失败）

ssh -keygen -t rsa -C 2867102374@qq.com       执行后会生成～/.ssh/id_rsa.pub文件，复制到github上

流程github settings，点击SSH and GPG ，点击New SSH  复制

配置之后ssh -T git@github.com   ，使用push还是失败，提示因为远程仓库包含您本地尚不存在的提交，需要先pull

git pull origin  master,还是失败，显示拒绝合并无关的历史，这是因为在pull之前，自己新建过一个项目，执行了add和commit,

所以需要执行下面命令，忽略历史 git pull origin main  --allow-unrelated-histories



#### 团队协作开发

1

先fork仓库  =》 然后clone 自己fork的仓库 =》 写代码，当要push的时候，先把原仓库的代码拉取然后合并，再push到自己fork仓库

=〉最后在fork仓库来 提交pull request ，经过原仓库审核合并









#### 解决问题记录

1   我自己建立的git管理仓库和idea创建的有冲突，idea是在每个工程下创建一个.git，我是在总目录下创建.git

当总目录下有.git 其子目录也有.git 时会报错



2 出问题了，fork的仓库，会看到自动更新，刚刚看到了。mac push的代码,fork能看到  

fork的仓库，当原库更新的时候，fork的仓库不会更新，所以每次我们更新我们fork库的时候，需要从原仓库fetch一下，合并到当前的本地仓库，然后再推到自己fork的仓库



3  当clone库后，通过idea做了些vcs文件修改，导致.idea中的.vcs发生变化，然后当去从原仓库pull时候，导致没法合并。

这个时候git stash 封存修改  再git pull ，然后再git stash pop 把修改还原



4 fork的仓库无法自动实时更新，解决方法，winodows每次写代码的时候先从mac库pull，然后写完之后,

​	在push到windows库，git pull的时候可以选择从哪个远程仓库拉取。



5 把md目录上传github管理遇到问题：当前分支 master 没有对应的上游分支，为推送当前分支并建立与远程上游的跟踪。

   执行 git push --set-upstream 远仓别名 master



#### 待解决问题

# git团队篇

1 先创建远程仓库详情看本地关联云端 =》在github仓库点settings=>collaborator=>add people 

2 从远程仓库 git clone <版本库的网址>

3 fork实时同步问题：winodows每次写代码的时候先从mac库pull，然后写完之后,在push到windows库，git pull的时候可以选择从哪个	远程仓库拉取。

4  fork的仓库代码修改后，windows点pull request=> new pull request=>mac进入pull request点击合并同意

5  windows pull拉取失败，mac更改的某个文件的package包名,winodws对那个文件删除了一行空格，导致merge时windows的那个文件会被覆盖。解决方法:右键 --> Git --> Repository --> Stash Changes --> Create Stash 将本地的全部改动临时保存到本地仓库，并撤销了本地的所有改动；然后再pull 最后再点击 UnStash Changes --> Pop Stash ，这样就将之前的改动合并到本地。



# github篇

fork

是对一个仓库的克隆。克隆一个仓库允许你自由试验各种改变，而不影响原始的项目。
一般来说，forks 被用于去更改别人的项目（贡献代码给已经开源的项目）或者使用别人的项目作为你自己想法的初始开发点。
提出更改别人的项目.Fork 这个仓库，进行更改，向这个项目的拥有者提交一个 pull requset，如果这个项目的拥有者认同你的成果，他们可能会将你的修复更新到原始的仓库中！



pull requests 

先fork一个仓库，然后你在a2仓库工作，commit,push等。当你希望原始仓库合并你的代码，可以在github上发起一个pullrequest，

请求合并你的分支，审核通过就合并了







# git以前总结

#### git链接idea



#### 忽略文件

idea项目上传到git的时候，因为有一些不涉及代码的一些idea自己创建的文件，这些文件是系统自动适配的，不同电脑不同，所以一般git上传的时候这些忽略掉，需要配置一下。这样拉取的时候也方便

#### git 本地操作

#### 1.初始化本地库(git init)

先进入仓库目录，然后右键git bash  here。然后 git init

#### 2.设置用户名和用户签名

这里可以每个仓库不同的用户，也可以设置一个global全局的用户。级别是仓库级别最好，然后global，然后system

git config --local -l	查看仓库配置（这个要进入对应的仓库去）

git config --global -l 查看用户配置

git config --system -l 查看系统配置

创建用户（local是本地，globle是全局）

git config --local user.name  lpc  设置用户签名

git config --local user.email  @qq.com   设置用户签名(让别人能找到你，给你发邮件)

#### 3.检测目录和提交到仓库

git status 这个可以检测当前目录和仓库里的文件的差异

git add  你可以选择性的把部分文件加入到缓存区（这样的话提交可以只提交一部分）

git commit  -m   “备注说明  ”把缓存中变化的文件，同步到本地仓库中。

#### 4.git log 和git reflog 和版本回退

git log可以查看所有commit记录

git  relog可以查看所有分支合并，删除，回退，pull等记录

git reset --hard 版本号  

这个版本号是同git reflog来查看的，不知道git log里面的commit的编号有什么用？

#### 5.分支相关

git branch  分支1       创建分支1

git branch   -v              查看所有分支

git  checkout  分支1     切换到分支1

git   merge       分支2     将当前环境的分支和分支2合并



##### ？？？？下面的有点想不懂，怎么合并的

都有a,b三个文件，master修改了a文件（a新,b老）, branch 修改了b文件(a老,b新)。

当把b合并到a时，因为如果都修改了a说明有冲突，所以要保证拉走的时候,master和branch的a是相同版本。

##### 注意：上面的理解是错误的

因为git的本质是来diff来合并 的，而不是通过文件对比来合并的。也就是说，和并的时候只会把branch和master的操作合并？？？这么想也不对呀，那么如果我两个分支的文件都不一样，我做操作，你合并出来，也不是我想要的呀。

因为你创建分支的时候，肯定是和master状态相同的。

##### 问题

就是如果本地仓库的代码在master状态下写完了，忘记提交了，那么我当切换分支到branch 再切回来是不是就给重置了。

实验过了，切过去branch之后，在切回来master我改的代码还在。并且我用git status，发现那个没提交的代码还是爆红的。

##### ？？？？？

那就很奇怪了，如果没提交的话，仓库里应该是提交之前的状态呀，为什么会有我工作空间的状态呢？？也就是说，在git仓库中，不仅存了你之前提交的状态，还有你工作空间的临时状态。

##### 实验过：？？？合并有点问题

我在各个分支上把a给删除了，只要都同步了，不管怎么弄都是不行的？？？？



#### 6.分支是什么

现在工作目录是空的，然后我创建了branch1，现在有master和branch1两个分支。

当我在工作目录下创建一个a文件，然后我commit到master分支。当你用git指令切换到branch分支时，你会发现你工作目录下的新建文件没有了，并且你用git status没有文件变化。因为你创建a的时候是在master上创建的。

##### 总结:

也就是说，多个分支共用一个工作目录，当你在git上执行 切换指令时，git会把你的工作目录下的文件全换成仓库中对应分支的文件状态。

也就是说你新建文件，等等操作都是针对某一个分支的，另外一个分支什么都不知道。当你切换分支的时候会把你的缓冲区清空，也就是说你想跨分支commit缓冲区是不可以的。

那么我怎么知道我现在是工作目录是处于哪个分支呢？如果不打开git bash的话。就是你最后一次离开的时候所处于的分支。









#### github操作

#### 1.git连接github

git remote -v 查看当前所有远程地址别名
git remote add 别名 远程地址

git clone 远程地址

git push 别名 分支

git pull 别名  远程分支名

(这个是把远程分支拉下来吗？？)，并且我拉取下来的分支是合并到哪个分支呢？？？还是说把所有分支都拉取下来？？还是说只能拉取一个分支，然后会和我当先所处于的分支进行合并。

#### 2.在本地创建2个分支

git push  hub地址  分支名

注意这里推的是把你写的分支直接推到github上，跟你的所处的环境没关系，即使你处于main，你执行

git push branch 也是把本地的branch推上去。这里的分支名字是你本地的分支名字，不是github上的分支名。如果github上没有你创建的这个分支，那么就是直接新建一个分支，如果有你的这个分支就是合并。

也就是说你推的分支只能推到github上的同名分支，没有的话，给你新建一个。

#### 3.git clone



git拉取指定分支

git clone -b 分支名    clone地址 

##### git pull origin  分支名

git clone之后看到本地只有一个main分支.

然后我直接git pull origin  branch1,执行之后发现本来还是只有一个分支，然后把pull拉取的branch分支，直接合并到main分支了，而不是说又拉了一个分支。

也就是说pull的作用就是把你输入的分支名字拉取过来，然后合并到我当前环境的分支。并不需要你当前环境和拉取的分支名字一样。

但是如果你当前处于的分支名字和pull拉的名字不一样的话，你再push的时候又会创建一个新的branch了。

一般大家都处于同一个dev，所以拉取的时候都是pull dev。如果大家本地的分支名字不一样的话，相当于github上有很多的分支了。所以都应该叫一个名字。



#### ？？？？

这里有个问题，就是说我的github，别人能拉，我可以理解，问什么别人能随便推新的分支到我的github上呢？？？

评什么别人能合并我的代码呢？？？？push

#### 



#### 4.git小问题

如果你不先把本地目录先init的话，你是不能用git remote创建别名的，也不能用git pull 指令。

所以要么是先init目录再去pull，要么你直接用git clone

这里有一点小区别，因为你git init会把你bash所在的目录当作仓库，所以pull的时候只把文件拉下来。

但是你用git clone的时候，会在你的bash目录下，先创建一个项目名字（和github上项目名字一样），然后再在项目目录当作仓库

#### idea中使用git

git配置好执行器之后

用vcs,点checkpoint 然后clone就行了

vcs中有git,有push。







#### 总结:

只用git的话，相当于是自己给自己维护代码。现在用了github，相当于你本地有一个仓库，github上有一个仓库，那么2个仓库之间的数据同步是怎么弄的呢？？

本地仓库和工作区的同步，是用git add,git commit。并且同步到具体哪个分支，你只要处于哪个分支，commit的时候就会提交到哪个分支。

远程仓库的分支同步因为你不能像本地仓库那样你具体处于哪个分支，所以你push（相当于commit了）的时候一定要选定github上的具体分支。这个push是把你缓冲区推上去的？？？还是把你本地仓库推上去呢？？？因为缓冲区的变化记录是比对本地仓库和工作目录的比较。所以push的话应该是把本地仓库推上去，而不是把缓冲区推上去，而且你push上去的时候，如果别人做过修改的话，github相当于手动帮你把两个版本的合并了。这里的push不仅仅单纯的把你的操作上传，如果你Push之前有人还push过其他的，git会把你这两部分代码合并。

也就是说merge我们一般用来合并分支，当你Push的时候，github会把你push过来的分支，和他原来的分支合并。

而git pull的时候，你一般都是处于一个分支中，所以选定某个分支，拉下来，和push的原理差不多，他会把pull下来的版本，和你当前的版本进行合并。

##### ？？？？？？？？

这里有个问题就是，加入我这里误删代码，或者改错东西了，我还找不到，我想把github上原来的代码重新pull一次是不行的，因为pull的话也是和你现在已经有的代码进行合并了。这个可以自己尝试一个（你先pull，然后再修改，然后再commit然后pull，你发现你这个还是你修改的，并不会还原）

如果你想还原的话，用git的回退功能就行。而不用pull来回退。

这里有个问题，比如有人在github上乱改代码，我pull合并之后发现，有的代码是乱写的，怎么办。不知道pull的时候能不能看到别人改动的文件，我们像git add那样，自己选择哪些加入缓冲区。不过pull好像不会有这个功能。相当于直接类似本地仓库的commit，直接把数据pull过来就合并了。



远程仓库的同步是和本地仓库来同步的？还是和缓冲区来同步的呢?还是和工作区同步的呢？？。正常来说肯定是和本地仓库同步的，或者是缓冲区。因为要涉及到你目前处于哪个分支。





#### 2.

从远程仓库拉取的时候，有个问题就是我把本地仓库的代码进行修改了，现在远程仓库的代码有人改过了，这个时候我pull，是不是相当于直接把拉取下来的分支合并了？？



这里有几个问题，就是第一个clone的时候是把所有分支都克隆下来吧。

然后分支的具体含义就是，我怎么才能在windows中直接读取分支中的文件，然后修改呢？？因为master和branch1的内容应该是不一样的。我pull下来的时候，只是把各个branch都下载过来了吗？？我本地仓库是有2个文件夹，还是一个文件夹呢。

按之前的想法就是目录工作区只有一个，那么你pull的时候，只是把你的本地仓库变化了嘛？也就是说你的工作目录是没有变化的。如果是变化的那么。我打开的文件到底是branch的还是master的？？

因为我们在gitbash中可以选定分支再cat，但是我们直接打开文件的时候，没法选定分支呀。难道说只能用Idea吗？？

#### 想法

#### 1.

第一个问题就是多个分支是不是要对应多个不同的目录呢？？？，那我commit还选定分支干什么？
如果是一个目录对应多分支的话。我想并发修改，那么我改了这个不是相当于把那个也改了吗。

正常的话都是git status看git变动，git  add，然后git commit。
git  add的意义呢？？我直接git   status  再git  commit不行吗？？
git add是要选定文件的，而不是把修改的全加入缓冲区。git adx可以只选一部分

#### 2.

答案：会有这个疑惑的，请先问问自己，使用git时候是否都是所有的修改全部提交了，根本没有考虑到多个修改文件，是和多个功能有关，而每一个功能应该单独做成一次提交，这样可以保证提交历史的清晰。否则，当你想要回滚历史的时候，你会无所适从，根本分不清每个版本包含了哪些功能，修复了哪些bug.而暂存区的作用就是为了，可以选择提交，比如你在开发B功能的时候，发现A功能还存在Bug，这时候就需要先修复A中的Bug，然后先提交修复的A中的Bug,然后再提交B功能开发的文件。这样就可以提高提交版本历史记录的清晰，方便回滚。而提交是原子性操作，文件的选择就交于暂存区去做，每一次提交都是一个完整的功能开发，保证commit的干净，降低commit的粒度。

例子：比如你在优化功能a开发了一半，然后有个紧急bug要你修复。然后你修复了b就要赶紧提交了。但是你a才优化到一半，不可能把a也提交了，不然的话a功能不能用了。如果没有缓冲区的话，你只能等a优化完才能一起提交。而且这个提交包含了两个功能，优化和改bug。不太好。版本提交应该功能分工明确。而且对于紧急的bug修改应该改了立刻提交，而不是等到a开发完成。缓冲区你可以add你要提交文件。所以比直接把整个代码库提交要好。
所以你一个文件应该只有一个功能或者部分功能，不能一个文件有多个功能。

#### 3.

初学者尤其是没有工作的学生初识git思维会有些局限，不了解git真实应用场景和它应该要解决的核心问题，容易站在自己的角度和自己的思维模式下去考虑一些功能设计的意义，当然会有些费解；你需要知道版控工具它的意义，如为了更好地协同工作，更好地保存工作进度，明白一个功能它要解决的核心问题是什么；

其实有一些你想不懂的，感觉冗余没意义的东西，也是后面增加的，刚开始也没有，后来遇到一些场景了，没办法了，增加了这个冗余的东西。如果你没遇到问题场景，想不懂这个意义是什么，遇到了才知道。
比如单例模式，当用到mysql连接时就有用了。

#### 4.

应该是你第一次pull的时候，会有一个版本号a。等你改动之后变为版本c，你再pull的时候。如果其他人提交过代码，就是一个新版本号b。你拉的内容是（从a版本变成b版本的操作），然后在本地把这个操作再做一遍。会检测你这个a到b，与a到c的操作有没有冲突，如果没有冲突，说明可以合并。举个例子如果你原来pull的a版本有1.2.3.4四个文件，你只修改了4。等你再拉的时候，别人把1.2.3都删除了，然后commit了。你再拉的时候，你是版本b，有你a到b的操作记录。然后把c拉过来的时候，会检测你上一次拉的是什么版本。发现是a会把a到c的变化给你记录。然后发现a到c是删除了1.2.3而，a到b是改动了4，可以合并。所以最后pull以后就是删了1.2.3改动了4。
如果有冲突会会告诉你。

只有第一次clone是下载整个文件。剩下来的就是
pull和push都是操作。
当你从a开发到b准备push，然后现在有人已经把a变换成c版本了。你push的时候会检验a到b的操作和a到c的操作有没有冲突。如果没有的话就可以合并，然后是的d版本。
如果有冲突的话你应该push不成功。或者说会把后push的给前面改掉。所以说都是先pull来看看有没有冲突。

#### 5.

git本地仓库的各个版本也是只记录操作，回退的时候是把操作逆推过去得到历史版本。不然你commit一次，就把文件全复制一份，没法玩了。
应该也会有一份原文件，不然你删除的文件没法回滚了

你可以理解成，你自己写的文件更改是缓存，真正的文件在仓库里。虽然不是这样，但是这样好理解。git的仓库不是你的工作目录，而是在. git中隐藏的。

本地仓库是git add，git commit 。远程仓库是push，pull。这个是把仓库中的推过去呢？？还是把add缓冲区推过去呢？还是把本地文件推过去呢？？

对于已经有的本地库，你可以建立一个远程的空仓库来关联。也可以先建立一个空的库，然后clone然后把代码放进去再push
如果已经有远程库了，我们可以clone。

#### 6.

多分支比如我从现在这个状态创建一个分支，然后进去这个分支b，然后进去分支b，git  add，git  commit是提交到b分支的。回到a分支以后再去查看a分支的文件是没有提交内容的。

也就是说我切换分支查看的内容和我原文件查看的内容是不一致的。
也就是说如果我对a. txt更改不提交的话，我通过git查看的cat文件是不变的。

merge  b是把，b合并到当前分支。只是当前分支变化了，而b没变。

？？？这里有个问题，就是说在git上cat的文件是历史版本，而不是当前文件。

#### 7.

远程库的默认名字是orgin，而
git checkout –b dev origin/dev，这个是干什么的。

git push  origin  master，
我绑定的一个source源头，难道还能绑定多个远程仓库吗？？所以我要选定是哪个远程仓库。然后是哪个把现在所处于的分支，推送到哪个分支上去。
举个例子我现在在分支b我推的时候，可以推到master.上吧

有个问题就是说   github上的 a. b分支。怎么和本地的la. lb分支绑定呢。

比如本地可以有2个分支，当我push的时候应该是把我现在处于的分支的内容push上去。是不是还要指明push到远程仓库的哪个分支呀？？？

还是说我push的时候可以选择把本地的哪个分支推到github上的哪个分支

#### 8.

问题就是我工作区直接打开的文件到底和分支绑定了吗。如果没绑定，我pull拉过来的数据，怎么同步到工作区文件呢？？还有就是我怎么在工作区打开不同分支的文件。

#### 

